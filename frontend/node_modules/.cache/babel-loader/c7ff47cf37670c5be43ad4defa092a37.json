{"ast":null,"code":"import React,{Component}from'react';import uuidv1 from'uuidv1';import{Editor,EditorState,RichUtils,getDefaultKeyBinding}from'draft-js';import{stateToHTML}from'draft-js-export-html';import BlockStyleControls from'./RichText/BlockStyleControls';import InlineStyleControls from'./RichText/InlineStyleControls';import'./RichText.css';export class NewStory extends Component{constructor(props){super(props);this.state={editorState:EditorState.createEmpty(),title:'',image:'',body:'',done:'no'};this.focus=()=>this.refs.editor.focus();this.onChange=this.onChange.bind(this);this.handleKeyCommand=this._handleKeyCommand.bind(this);this.mapKeyToEditorCommand=this._mapKeyToEditorCommand.bind(this);this.toggleBlockType=this._toggleBlockType.bind(this);this.toggleInlineStyle=this._toggleInlineStyle.bind(this);this.handleSubmit=this.handleSubmit.bind(this);}onChange(editorState){this.setState({editorState});const contentState=this.state.editorState.getCurrentContent();const html=stateToHTML(contentState);this.state.title&&this.state.body?this.setState({done:'done'}):console.log('ok lets go');this.setState({body:html});}_handleKeyCommand(command,editorState){const newState=RichUtils.handleKeyCommand(editorState,command);if(newState){this.onChange(newState);return true;}return false;}_mapKeyToEditorCommand(e){if(e.keyCode===9/* TAB */){const newEditorState=RichUtils.onTab(e,this.state.editorState,4/* maxDepth */);if(newEditorState!==this.state.editorState){this.onChange(newEditorState);}return;}return getDefaultKeyBinding(e);}_toggleBlockType(blockType){this.onChange(RichUtils.toggleBlockType(this.state.editorState,blockType));}_toggleInlineStyle(inlineStyle){this.onChange(RichUtils.toggleInlineStyle(this.state.editorState,inlineStyle));}handleSubmit(){const{title,image,body}=this.state;if(title&&body){let newStory={id:uuidv1(),title,image,body,bookmark:false};this.props.handleSubmission(newStory);this.setState({editorState:EditorState.createEmpty(),title:'',image:'',body:'',done:'submitted'});}}render(){const{editorState}=this.state;let className='RichEditor-editor';var contentState=editorState.getCurrentContent();if(!contentState.hasText()){if(contentState.getBlockMap().first().getType()!=='unstyled'){className+=' RichEditor-hidePlaceholder';}}const{title,done}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"richtext-editor\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"input-title\",value:title,onChange:e=>this.setState({title:e.target.value}),placeholder:\"Ti\\xEAu \\u0111\\u1EC1\"}),/*#__PURE__*/React.createElement(BlockStyleControls,{editorState:editorState,onToggle:this.toggleBlockType}),/*#__PURE__*/React.createElement(InlineStyleControls,{editorState:editorState,onToggle:this.toggleInlineStyle}),/*#__PURE__*/React.createElement(\"div\",{className:className,onClick:this.focus},/*#__PURE__*/React.createElement(Editor,{blockStyleFn:getBlockStyle,editorState:editorState,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.mapKeyToEditorCommand,onChange:this.onChange,placeholder:\"K\\u1EC3 c\\xE2u chuy\\u1EC7n c\\u1EE7a b\\u1EA1n...\",ref:\"editor\",spellCheck:true})),done==='done'?/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleSubmit,className:\"btn btn-submit\"},\"G\\u1EEDi\"):done==='submitted'?/*#__PURE__*/React.createElement(\"span\",{className:\"msg-success\"},\"C\\xE2u chuy\\u1EC7n c\\u1EE7a b\\u1EA1n \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c g\\u1EEDi.\"):/*#__PURE__*/React.createElement(\"span\",{className:\"msg-error\"},\"B\\u1EA1n ch\\u01B0a ho\\xE0n th\\xE0nh c\\xE2u chuy\\u1EC7n.\"));function getBlockStyle(block){switch(block.getType()){case'blockquote':return'RichEditor-blockquote';default:return null;}}}}export default NewStory;","map":{"version":3,"names":["React","Component","uuidv1","Editor","EditorState","RichUtils","getDefaultKeyBinding","stateToHTML","BlockStyleControls","InlineStyleControls","NewStory","constructor","props","state","editorState","createEmpty","title","image","body","done","focus","refs","editor","onChange","bind","handleKeyCommand","_handleKeyCommand","mapKeyToEditorCommand","_mapKeyToEditorCommand","toggleBlockType","_toggleBlockType","toggleInlineStyle","_toggleInlineStyle","handleSubmit","setState","contentState","getCurrentContent","html","console","log","command","newState","e","keyCode","newEditorState","onTab","blockType","inlineStyle","newStory","id","bookmark","handleSubmission","render","className","hasText","getBlockMap","first","getType","createElement","type","value","target","placeholder","onToggle","onClick","blockStyleFn","getBlockStyle","keyBindingFn","ref","spellCheck","block"],"sources":["C:/Users/khang/Downloads/Shop_reactjs/Shop_reactjs/frontend/src/components/shop/blog/NewStory.js"],"sourcesContent":["import React, { Component } from 'react';\nimport uuidv1 from 'uuidv1';\nimport {Editor, EditorState, RichUtils, getDefaultKeyBinding} from 'draft-js';\nimport {stateToHTML} from 'draft-js-export-html';\n\nimport BlockStyleControls from './RichText/BlockStyleControls';\nimport InlineStyleControls from './RichText/InlineStyleControls';\n\nimport './RichText.css';\n\nexport class NewStory extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        editorState: EditorState.createEmpty(),\n        title: '',\n        image: '',\n        body: '',\n        done: 'no'\n      };\n\n      this.focus = () => this.refs.editor.focus();\n      this.onChange = this.onChange.bind(this);\n      this.handleKeyCommand = this._handleKeyCommand.bind(this);\n      this.mapKeyToEditorCommand = this._mapKeyToEditorCommand.bind(this);\n      this.toggleBlockType = this._toggleBlockType.bind(this);\n      this.toggleInlineStyle = this._toggleInlineStyle.bind(this);\n      this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    onChange(editorState) {\n      this.setState({editorState});\n      const contentState = this.state.editorState.getCurrentContent();\n      const html = stateToHTML(contentState);\n      this.state.title && this.state.body ? this.setState({done: 'done'}) : console.log('ok lets go');\n      this.setState({body: html});\n    }\n\n    _handleKeyCommand(command, editorState) {\n      const newState = RichUtils.handleKeyCommand(editorState, command);\n      if (newState) {\n        this.onChange(newState);\n        return true;\n      }\n      return false;\n    }\n\n    _mapKeyToEditorCommand(e) {\n      if (e.keyCode === 9 /* TAB */) {\n        const newEditorState = RichUtils.onTab(\n          e,\n          this.state.editorState,\n          4, /* maxDepth */\n        );\n        if (newEditorState !== this.state.editorState) {\n          this.onChange(newEditorState);\n        }\n        return;\n      }\n      return getDefaultKeyBinding(e);\n    }\n\n    _toggleBlockType(blockType) {\n      this.onChange(\n        RichUtils.toggleBlockType(\n          this.state.editorState,\n          blockType\n        )\n      );\n    }\n\n    _toggleInlineStyle(inlineStyle) {\n      this.onChange(\n        RichUtils.toggleInlineStyle(\n          this.state.editorState,\n          inlineStyle\n        )\n      );\n    }\n\n    handleSubmit() {\n      const { title,image, body } = this.state;\n      if(title && body) {\n        let newStory = {id: uuidv1(), title, image, body, bookmark: false};\n        this.props.handleSubmission(newStory);\n        this.setState({editorState: EditorState.createEmpty(), title: '', image: '', body: '', done: 'submitted'});\n      }\n    }\n\n    render() {\n      const { editorState } = this.state;\n      let className = 'RichEditor-editor';\n      var contentState = editorState.getCurrentContent();\n      if (!contentState.hasText()) {\n        if (contentState.getBlockMap().first().getType() !== 'unstyled') {\n          className += ' RichEditor-hidePlaceholder';\n        }\n      }\n\n      const { title, done } = this.state;\n\n      return (\n        <div className=\"richtext-editor\">\n          <input type=\"text\" className=\"input-title\" value={title} onChange={(e) => this.setState({title: e.target.value})} placeholder=\"Tiêu đề\" />\n          <BlockStyleControls\n            editorState={editorState}\n            onToggle={this.toggleBlockType}\n          />\n          <InlineStyleControls\n            editorState={editorState}\n            onToggle={this.toggleInlineStyle}\n          />\n          <div className={className} onClick={this.focus}>\n            <Editor\n              blockStyleFn={getBlockStyle}\n              editorState={editorState}\n              handleKeyCommand={this.handleKeyCommand}\n              keyBindingFn={this.mapKeyToEditorCommand}\n              onChange={this.onChange}\n              placeholder=\"Kể câu chuyện của bạn...\"\n              ref=\"editor\"\n              spellCheck={true}\n            />\n          </div>\n          {done ==='done' ? <button onClick={this.handleSubmit} className=\"btn btn-submit\">Gửi</button> : (done==='submitted' ? <span className=\"msg-success\">Câu chuyện của bạn đã được gửi.</span> : <span className=\"msg-error\">Bạn chưa hoàn thành câu chuyện.</span>)}\n        </div>\n      );\n\n      function getBlockStyle(block) {\n        switch (block.getType()) {\n          case 'blockquote': return 'RichEditor-blockquote';\n          default: return null;\n        }\n      }\n    }\n}\n\nexport default NewStory;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,OAAQC,MAAM,CAAEC,WAAW,CAAEC,SAAS,CAAEC,oBAAoB,KAAO,UAAU,CAC7E,OAAQC,WAAW,KAAO,sBAAsB,CAEhD,MAAO,CAAAC,kBAAkB,KAAM,+BAA+B,CAC9D,MAAO,CAAAC,mBAAmB,KAAM,gCAAgC,CAEhE,MAAO,gBAAgB,CAEvB,MAAO,MAAM,CAAAC,QAAQ,QAAS,CAAAT,SAAU,CACtCU,WAAWA,CAACC,KAAK,CAAE,CACf,KAAK,CAACA,KAAK,CAAC,CACZ,IAAI,CAACC,KAAK,CAAG,CACXC,WAAW,CAAEV,WAAW,CAACW,WAAW,CAAC,CAAC,CACtCC,KAAK,CAAE,EAAE,CACTC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,IACR,CAAC,CAED,IAAI,CAACC,KAAK,CAAG,IAAM,IAAI,CAACC,IAAI,CAACC,MAAM,CAACF,KAAK,CAAC,CAAC,CAC3C,IAAI,CAACG,QAAQ,CAAG,IAAI,CAACA,QAAQ,CAACC,IAAI,CAAC,IAAI,CAAC,CACxC,IAAI,CAACC,gBAAgB,CAAG,IAAI,CAACC,iBAAiB,CAACF,IAAI,CAAC,IAAI,CAAC,CACzD,IAAI,CAACG,qBAAqB,CAAG,IAAI,CAACC,sBAAsB,CAACJ,IAAI,CAAC,IAAI,CAAC,CACnE,IAAI,CAACK,eAAe,CAAG,IAAI,CAACC,gBAAgB,CAACN,IAAI,CAAC,IAAI,CAAC,CACvD,IAAI,CAACO,iBAAiB,CAAG,IAAI,CAACC,kBAAkB,CAACR,IAAI,CAAC,IAAI,CAAC,CAC3D,IAAI,CAACS,YAAY,CAAG,IAAI,CAACA,YAAY,CAACT,IAAI,CAAC,IAAI,CAAC,CAClD,CAEAD,QAAQA,CAACT,WAAW,CAAE,CACpB,IAAI,CAACoB,QAAQ,CAAC,CAACpB,WAAW,CAAC,CAAC,CAC5B,KAAM,CAAAqB,YAAY,CAAG,IAAI,CAACtB,KAAK,CAACC,WAAW,CAACsB,iBAAiB,CAAC,CAAC,CAC/D,KAAM,CAAAC,IAAI,CAAG9B,WAAW,CAAC4B,YAAY,CAAC,CACtC,IAAI,CAACtB,KAAK,CAACG,KAAK,EAAI,IAAI,CAACH,KAAK,CAACK,IAAI,CAAG,IAAI,CAACgB,QAAQ,CAAC,CAACf,IAAI,CAAE,MAAM,CAAC,CAAC,CAAGmB,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CAC/F,IAAI,CAACL,QAAQ,CAAC,CAAChB,IAAI,CAAEmB,IAAI,CAAC,CAAC,CAC7B,CAEAX,iBAAiBA,CAACc,OAAO,CAAE1B,WAAW,CAAE,CACtC,KAAM,CAAA2B,QAAQ,CAAGpC,SAAS,CAACoB,gBAAgB,CAACX,WAAW,CAAE0B,OAAO,CAAC,CACjE,GAAIC,QAAQ,CAAE,CACZ,IAAI,CAAClB,QAAQ,CAACkB,QAAQ,CAAC,CACvB,MAAO,KAAI,CACb,CACA,MAAO,MAAK,CACd,CAEAb,sBAAsBA,CAACc,CAAC,CAAE,CACxB,GAAIA,CAAC,CAACC,OAAO,GAAK,CAAE,UAAW,CAC7B,KAAM,CAAAC,cAAc,CAAGvC,SAAS,CAACwC,KAAK,CACpCH,CAAC,CACD,IAAI,CAAC7B,KAAK,CAACC,WAAW,CACtB,CAAG,cACL,CAAC,CACD,GAAI8B,cAAc,GAAK,IAAI,CAAC/B,KAAK,CAACC,WAAW,CAAE,CAC7C,IAAI,CAACS,QAAQ,CAACqB,cAAc,CAAC,CAC/B,CACA,OACF,CACA,MAAO,CAAAtC,oBAAoB,CAACoC,CAAC,CAAC,CAChC,CAEAZ,gBAAgBA,CAACgB,SAAS,CAAE,CAC1B,IAAI,CAACvB,QAAQ,CACXlB,SAAS,CAACwB,eAAe,CACvB,IAAI,CAAChB,KAAK,CAACC,WAAW,CACtBgC,SACF,CACF,CAAC,CACH,CAEAd,kBAAkBA,CAACe,WAAW,CAAE,CAC9B,IAAI,CAACxB,QAAQ,CACXlB,SAAS,CAAC0B,iBAAiB,CACzB,IAAI,CAAClB,KAAK,CAACC,WAAW,CACtBiC,WACF,CACF,CAAC,CACH,CAEAd,YAAYA,CAAA,CAAG,CACb,KAAM,CAAEjB,KAAK,CAACC,KAAK,CAAEC,IAAK,CAAC,CAAG,IAAI,CAACL,KAAK,CACxC,GAAGG,KAAK,EAAIE,IAAI,CAAE,CAChB,GAAI,CAAA8B,QAAQ,CAAG,CAACC,EAAE,CAAE/C,MAAM,CAAC,CAAC,CAAEc,KAAK,CAAEC,KAAK,CAAEC,IAAI,CAAEgC,QAAQ,CAAE,KAAK,CAAC,CAClE,IAAI,CAACtC,KAAK,CAACuC,gBAAgB,CAACH,QAAQ,CAAC,CACrC,IAAI,CAACd,QAAQ,CAAC,CAACpB,WAAW,CAAEV,WAAW,CAACW,WAAW,CAAC,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,IAAI,CAAE,WAAW,CAAC,CAAC,CAC5G,CACF,CAEAiC,MAAMA,CAAA,CAAG,CACP,KAAM,CAAEtC,WAAY,CAAC,CAAG,IAAI,CAACD,KAAK,CAClC,GAAI,CAAAwC,SAAS,CAAG,mBAAmB,CACnC,GAAI,CAAAlB,YAAY,CAAGrB,WAAW,CAACsB,iBAAiB,CAAC,CAAC,CAClD,GAAI,CAACD,YAAY,CAACmB,OAAO,CAAC,CAAC,CAAE,CAC3B,GAAInB,YAAY,CAACoB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAK,UAAU,CAAE,CAC/DJ,SAAS,EAAI,6BAA6B,CAC5C,CACF,CAEA,KAAM,CAAErC,KAAK,CAAEG,IAAK,CAAC,CAAG,IAAI,CAACN,KAAK,CAElC,mBACEb,KAAA,CAAA0D,aAAA,QAAKL,SAAS,CAAC,iBAAiB,eAC9BrD,KAAA,CAAA0D,aAAA,UAAOC,IAAI,CAAC,MAAM,CAACN,SAAS,CAAC,aAAa,CAACO,KAAK,CAAE5C,KAAM,CAACO,QAAQ,CAAGmB,CAAC,EAAK,IAAI,CAACR,QAAQ,CAAC,CAAClB,KAAK,CAAE0B,CAAC,CAACmB,MAAM,CAACD,KAAK,CAAC,CAAE,CAACE,WAAW,CAAC,sBAAS,CAAE,CAAC,cAC1I9D,KAAA,CAAA0D,aAAA,CAAClD,kBAAkB,EACjBM,WAAW,CAAEA,WAAY,CACzBiD,QAAQ,CAAE,IAAI,CAAClC,eAAgB,CAChC,CAAC,cACF7B,KAAA,CAAA0D,aAAA,CAACjD,mBAAmB,EAClBK,WAAW,CAAEA,WAAY,CACzBiD,QAAQ,CAAE,IAAI,CAAChC,iBAAkB,CAClC,CAAC,cACF/B,KAAA,CAAA0D,aAAA,QAAKL,SAAS,CAAEA,SAAU,CAACW,OAAO,CAAE,IAAI,CAAC5C,KAAM,eAC7CpB,KAAA,CAAA0D,aAAA,CAACvD,MAAM,EACL8D,YAAY,CAAEC,aAAc,CAC5BpD,WAAW,CAAEA,WAAY,CACzBW,gBAAgB,CAAE,IAAI,CAACA,gBAAiB,CACxC0C,YAAY,CAAE,IAAI,CAACxC,qBAAsB,CACzCJ,QAAQ,CAAE,IAAI,CAACA,QAAS,CACxBuC,WAAW,CAAC,iDAA0B,CACtCM,GAAG,CAAC,QAAQ,CACZC,UAAU,CAAE,IAAK,CAClB,CACE,CAAC,CACLlD,IAAI,GAAI,MAAM,cAAGnB,KAAA,CAAA0D,aAAA,WAAQM,OAAO,CAAE,IAAI,CAAC/B,YAAa,CAACoB,SAAS,CAAC,gBAAgB,EAAC,UAAW,CAAC,CAAIlC,IAAI,GAAG,WAAW,cAAGnB,KAAA,CAAA0D,aAAA,SAAML,SAAS,CAAC,aAAa,EAAC,+EAAqC,CAAC,cAAGrD,KAAA,CAAA0D,aAAA,SAAML,SAAS,CAAC,WAAW,EAAC,yDAAqC,CAC3P,CAAC,CAGR,QAAS,CAAAa,aAAaA,CAACI,KAAK,CAAE,CAC5B,OAAQA,KAAK,CAACb,OAAO,CAAC,CAAC,EACrB,IAAK,YAAY,CAAE,MAAO,uBAAuB,CACjD,QAAS,MAAO,KAAI,CACtB,CACF,CACF,CACJ,CAEA,cAAe,CAAA/C,QAAQ"},"metadata":{},"sourceType":"module"}