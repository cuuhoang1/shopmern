{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khang\\\\Downloads\\\\Shop_reactjs\\\\Shop_reactjs\\\\frontend\\\\src\\\\components\\\\shop\\\\blog\\\\NewStory.js\";\nimport React, { Component } from 'react';\nimport uuidv1 from 'uuidv1';\nimport { Editor, EditorState, RichUtils, getDefaultKeyBinding } from 'draft-js';\nimport { stateToHTML } from 'draft-js-export-html';\nimport BlockStyleControls from './RichText/BlockStyleControls';\nimport InlineStyleControls from './RichText/InlineStyleControls';\nimport './RichText.css';\nexport class NewStory extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editorState: EditorState.createEmpty(),\n      title: '',\n      image: '',\n      body: '',\n      done: 'no'\n    };\n    this.focus = () => this.refs.editor.focus();\n    this.onChange = this.onChange.bind(this);\n    this.handleKeyCommand = this._handleKeyCommand.bind(this);\n    this.mapKeyToEditorCommand = this._mapKeyToEditorCommand.bind(this);\n    this.toggleBlockType = this._toggleBlockType.bind(this);\n    this.toggleInlineStyle = this._toggleInlineStyle.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  onChange(editorState) {\n    this.setState({\n      editorState\n    });\n    const contentState = this.state.editorState.getCurrentContent();\n    const html = stateToHTML(contentState);\n    this.state.title && this.state.body ? this.setState({\n      done: 'done'\n    }) : console.log('ok lets go');\n    this.setState({\n      body: html\n    });\n  }\n  _handleKeyCommand(command, editorState) {\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      this.onChange(newState);\n      return true;\n    }\n    return false;\n  }\n  _mapKeyToEditorCommand(e) {\n    if (e.keyCode === 9 /* TAB */) {\n      const newEditorState = RichUtils.onTab(e, this.state.editorState, 4 /* maxDepth */);\n\n      if (newEditorState !== this.state.editorState) {\n        this.onChange(newEditorState);\n      }\n      return;\n    }\n    return getDefaultKeyBinding(e);\n  }\n  _toggleBlockType(blockType) {\n    this.onChange(RichUtils.toggleBlockType(this.state.editorState, blockType));\n  }\n  _toggleInlineStyle(inlineStyle) {\n    this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, inlineStyle));\n  }\n  handleSubmit() {\n    const {\n      title,\n      image,\n      body\n    } = this.state;\n    if (title && body) {\n      let newStory = {\n        id: uuidv1(),\n        title,\n        image,\n        body,\n        bookmark: false\n      };\n      this.props.handleSubmission(newStory);\n      this.setState({\n        editorState: EditorState.createEmpty(),\n        title: '',\n        image: '',\n        body: '',\n        done: 'submitted'\n      });\n    }\n  }\n  render() {\n    const {\n      editorState\n    } = this.state;\n    let className = 'RichEditor-editor';\n    var contentState = editorState.getCurrentContent();\n    if (!contentState.hasText()) {\n      if (contentState.getBlockMap().first().getType() !== 'unstyled') {\n        className += ' RichEditor-hidePlaceholder';\n      }\n    }\n    const {\n      title,\n      done\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"richtext-editor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"input-title\",\n      value: title,\n      onChange: e => this.setState({\n        title: e.target.value\n      }),\n      placeholder: \"Ti\\xEAu \\u0111\\u1EC1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(BlockStyleControls, {\n      editorState: editorState,\n      onToggle: this.toggleBlockType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(InlineStyleControls, {\n      editorState: editorState,\n      onToggle: this.toggleInlineStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      onClick: this.focus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Editor, {\n      blockStyleFn: getBlockStyle,\n      editorState: editorState,\n      handleKeyCommand: this.handleKeyCommand,\n      keyBindingFn: this.mapKeyToEditorCommand,\n      onChange: this.onChange,\n      placeholder: \"K\\u1EC3 c\\xE2u chuy\\u1EC7n c\\u1EE7a b\\u1EA1n...\",\n      ref: \"editor\",\n      spellCheck: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    })), done === 'done' ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleSubmit,\n      className: \"btn btn-submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }, \"G\\u1EEDi\") : done === 'submitted' ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"msg-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 129\n      }\n    }, \"C\\xE2u chuy\\u1EC7n c\\u1EE7a b\\u1EA1n \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c g\\u1EEDi.\") : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"msg-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 200\n      }\n    }, \"B\\u1EA1n ch\\u01B0a ho\\xE0n th\\xE0nh c\\xE2u chuy\\u1EC7n.\"));\n    function getBlockStyle(block) {\n      switch (block.getType()) {\n        case 'blockquote':\n          return 'RichEditor-blockquote';\n        default:\n          return null;\n      }\n    }\n  }\n}\nexport default NewStory;","map":{"version":3,"names":["React","Component","uuidv1","Editor","EditorState","RichUtils","getDefaultKeyBinding","stateToHTML","BlockStyleControls","InlineStyleControls","NewStory","constructor","props","state","editorState","createEmpty","title","image","body","done","focus","refs","editor","onChange","bind","handleKeyCommand","_handleKeyCommand","mapKeyToEditorCommand","_mapKeyToEditorCommand","toggleBlockType","_toggleBlockType","toggleInlineStyle","_toggleInlineStyle","handleSubmit","setState","contentState","getCurrentContent","html","console","log","command","newState","e","keyCode","newEditorState","onTab","blockType","inlineStyle","newStory","id","bookmark","handleSubmission","render","className","hasText","getBlockMap","first","getType","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","value","target","placeholder","onToggle","onClick","blockStyleFn","getBlockStyle","keyBindingFn","ref","spellCheck","block"],"sources":["C:/Users/khang/Downloads/Shop_reactjs/Shop_reactjs/frontend/src/components/shop/blog/NewStory.js"],"sourcesContent":["import React, { Component } from 'react';\nimport uuidv1 from 'uuidv1';\nimport {Editor, EditorState, RichUtils, getDefaultKeyBinding} from 'draft-js';\nimport {stateToHTML} from 'draft-js-export-html';\n\nimport BlockStyleControls from './RichText/BlockStyleControls';\nimport InlineStyleControls from './RichText/InlineStyleControls';\n\nimport './RichText.css';\n\nexport class NewStory extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        editorState: EditorState.createEmpty(),\n        title: '',\n        image: '',\n        body: '',\n        done: 'no'\n      };\n\n      this.focus = () => this.refs.editor.focus();\n      this.onChange = this.onChange.bind(this);\n      this.handleKeyCommand = this._handleKeyCommand.bind(this);\n      this.mapKeyToEditorCommand = this._mapKeyToEditorCommand.bind(this);\n      this.toggleBlockType = this._toggleBlockType.bind(this);\n      this.toggleInlineStyle = this._toggleInlineStyle.bind(this);\n      this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    onChange(editorState) {\n      this.setState({editorState});\n      const contentState = this.state.editorState.getCurrentContent();\n      const html = stateToHTML(contentState);\n      this.state.title && this.state.body ? this.setState({done: 'done'}) : console.log('ok lets go');\n      this.setState({body: html});\n    }\n\n    _handleKeyCommand(command, editorState) {\n      const newState = RichUtils.handleKeyCommand(editorState, command);\n      if (newState) {\n        this.onChange(newState);\n        return true;\n      }\n      return false;\n    }\n\n    _mapKeyToEditorCommand(e) {\n      if (e.keyCode === 9 /* TAB */) {\n        const newEditorState = RichUtils.onTab(\n          e,\n          this.state.editorState,\n          4, /* maxDepth */\n        );\n        if (newEditorState !== this.state.editorState) {\n          this.onChange(newEditorState);\n        }\n        return;\n      }\n      return getDefaultKeyBinding(e);\n    }\n\n    _toggleBlockType(blockType) {\n      this.onChange(\n        RichUtils.toggleBlockType(\n          this.state.editorState,\n          blockType\n        )\n      );\n    }\n\n    _toggleInlineStyle(inlineStyle) {\n      this.onChange(\n        RichUtils.toggleInlineStyle(\n          this.state.editorState,\n          inlineStyle\n        )\n      );\n    }\n\n    handleSubmit() {\n      const { title,image, body } = this.state;\n      if(title && body) {\n        let newStory = {id: uuidv1(), title, image, body, bookmark: false};\n        this.props.handleSubmission(newStory);\n        this.setState({editorState: EditorState.createEmpty(), title: '', image: '', body: '', done: 'submitted'});\n      }\n    }\n\n    render() {\n      const { editorState } = this.state;\n      let className = 'RichEditor-editor';\n      var contentState = editorState.getCurrentContent();\n      if (!contentState.hasText()) {\n        if (contentState.getBlockMap().first().getType() !== 'unstyled') {\n          className += ' RichEditor-hidePlaceholder';\n        }\n      }\n\n      const { title, done } = this.state;\n\n      return (\n        <div className=\"richtext-editor\">\n          <input type=\"text\" className=\"input-title\" value={title} onChange={(e) => this.setState({title: e.target.value})} placeholder=\"Tiêu đề\" />\n          <BlockStyleControls\n            editorState={editorState}\n            onToggle={this.toggleBlockType}\n          />\n          <InlineStyleControls\n            editorState={editorState}\n            onToggle={this.toggleInlineStyle}\n          />\n          <div className={className} onClick={this.focus}>\n            <Editor\n              blockStyleFn={getBlockStyle}\n              editorState={editorState}\n              handleKeyCommand={this.handleKeyCommand}\n              keyBindingFn={this.mapKeyToEditorCommand}\n              onChange={this.onChange}\n              placeholder=\"Kể câu chuyện của bạn...\"\n              ref=\"editor\"\n              spellCheck={true}\n            />\n          </div>\n          {done ==='done' ? <button onClick={this.handleSubmit} className=\"btn btn-submit\">Gửi</button> : (done==='submitted' ? <span className=\"msg-success\">Câu chuyện của bạn đã được gửi.</span> : <span className=\"msg-error\">Bạn chưa hoàn thành câu chuyện.</span>)}\n        </div>\n      );\n\n      function getBlockStyle(block) {\n        switch (block.getType()) {\n          case 'blockquote': return 'RichEditor-blockquote';\n          default: return null;\n        }\n      }\n    }\n}\n\nexport default NewStory;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}