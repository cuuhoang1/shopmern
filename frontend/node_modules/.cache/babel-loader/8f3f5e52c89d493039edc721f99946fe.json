{"ast":null,"code":"import React,{Fragment,useState,useEffect,useContext}from\"react\";import{useHistory}from\"react-router-dom\";import{getAllProduct}from\"../../admin/products/FetchApi\";import{HomeContext}from\"./index\";import{isWishReq,unWishReq,isWish}from\"./Mixins\";const apiURL=process.env.REACT_APP_API_URL;const SingleProduct=props=>{const{data,dispatch}=useContext(HomeContext);const{products}=data;const history=useHistory();/* WhisList State */const[wList,setWlist]=useState(JSON.parse(localStorage.getItem(\"wishList\")));useEffect(()=>{fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const fetchData=async()=>{dispatch({type:\"loading\",payload:true});try{let responseData=await getAllProduct();setTimeout(()=>{if(responseData&&responseData.Products){dispatch({type:\"setProducts\",payload:responseData.Products});dispatch({type:\"loading\",payload:false});}},500);}catch(error){console.log(error);}};if(data.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-span-2 md:col-span-3 lg:col-span-4 flex items-center justify-center py-24\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})));}return/*#__PURE__*/React.createElement(Fragment,null,products&&products.length>0?products.map((item,index)=>{return/*#__PURE__*/React.createElement(Fragment,{key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"relative col-span-1 m-2\"},/*#__PURE__*/React.createElement(\"img\",{onClick:e=>history.push(\"/products/\".concat(item._id)),className:\"w-full object-cover object-center cursor-pointer\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(item.pImages[0]),alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-between mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-gray-600 font-light truncate\"},item.pName),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center space-x-1\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"svg\",{className:\"w-4 h-4 fill-current text-yellow-700\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"text-gray-700\"},item.pRatingsReviews.length))),/*#__PURE__*/React.createElement(\"div\",null,item.pPrice,\".000 VND\"),/*#__PURE__*/React.createElement(\"div\",{className:\"absolute top-0 right-0 mx-2 my-2 md:mx-4\"},/*#__PURE__*/React.createElement(\"svg\",{onClick:e=>isWishReq(e,item._id,setWlist),className:\"\".concat(isWish(item._id,wList)&&\"hidden\",\" w-5 h-5 md:w-6 md:h-6 cursor-pointer text-yellow-700 transition-all duration-300 ease-in\"),fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"})),/*#__PURE__*/React.createElement(\"svg\",{onClick:e=>unWishReq(e,item._id,setWlist),className:\"\".concat(!isWish(item._id,wList)&&\"hidden\",\" w-5 h-5 md:w-6 md:h-6 cursor-pointer text-yellow-700 transition-all duration-300 ease-in\"),fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\",clipRule:\"evenodd\"})))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"col-span-2 md:col-span-3 lg:col-span-4 flex items-center justify-center py-24 text-2xl\"},\"Kh\\xF4ng t\\xECm th\\u1EA5y s\\u1EA3n ph\\u1EA9m\"));};export default SingleProduct;","map":{"version":3,"names":["React","Fragment","useState","useEffect","useContext","useHistory","getAllProduct","HomeContext","isWishReq","unWishReq","isWish","apiURL","process","env","REACT_APP_API_URL","SingleProduct","props","data","dispatch","products","history","wList","setWlist","JSON","parse","localStorage","getItem","fetchData","type","payload","responseData","setTimeout","Products","error","console","log","loading","createElement","className","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","length","map","item","index","key","onClick","e","push","concat","_id","src","pImages","alt","pName","pRatingsReviews","pPrice","fillRule","clipRule"],"sources":["C:/Users/khang/Downloads/Shop_reactjs/Shop_reactjs/frontend/src/components/shop/home/SingleProduct.js"],"sourcesContent":["import React, { Fragment, useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { getAllProduct } from \"../../admin/products/FetchApi\";\nimport { HomeContext } from \"./index\";\nimport { isWishReq, unWishReq, isWish } from \"./Mixins\";\n\nconst apiURL = process.env.REACT_APP_API_URL;\n\nconst SingleProduct = (props) => {\n  const { data, dispatch } = useContext(HomeContext);\n  const { products } = data;\n  const history = useHistory();\n\n  /* WhisList State */\n  const [wList, setWlist] = useState(\n    JSON.parse(localStorage.getItem(\"wishList\"))\n  );\n\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const fetchData = async () => {\n    dispatch({ type: \"loading\", payload: true });\n    try {\n      let responseData = await getAllProduct();\n      setTimeout(() => {\n        if (responseData && responseData.Products) {\n          dispatch({ type: \"setProducts\", payload: responseData.Products });\n          dispatch({ type: \"loading\", payload: false });\n        }\n      }, 500);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  if (data.loading) {\n    return (\n      <div className=\"col-span-2 md:col-span-3 lg:col-span-4 flex items-center justify-center py-24\">\n        <svg\n          className=\"w-12 h-12 animate-spin text-gray-600\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"2\"\n            d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n          ></path>\n        </svg>\n      </div>\n    );\n  }\n  return (\n    <Fragment>\n      {products && products.length > 0 ? (\n        products.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <div className=\"relative col-span-1 m-2\">\n                <img\n                  onClick={(e) => history.push(`/products/${item._id}`)}\n                  className=\"w-full object-cover object-center cursor-pointer\"\n                  src={`${apiURL}/uploads/products/${item.pImages[0]}`}\n                  alt=\"\"\n                />\n                <div className=\"flex items-center justify-between mt-2\">\n                  <div className=\"text-gray-600 font-light truncate\">\n                    {item.pName}\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    <span>\n                      <svg\n                        className=\"w-4 h-4 fill-current text-yellow-700\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"\n                        />\n                      </svg>\n                    </span>\n                    <span className=\"text-gray-700\">\n                      {item.pRatingsReviews.length}\n                    </span>\n                  </div>\n                </div>\n                <div>{item.pPrice}.000 VND</div>\n                {/* WhisList Logic  */}\n                <div className=\"absolute top-0 right-0 mx-2 my-2 md:mx-4\">\n                  <svg\n                    onClick={(e) => isWishReq(e, item._id, setWlist)}\n                    className={`${\n                      isWish(item._id, wList) && \"hidden\"\n                    } w-5 h-5 md:w-6 md:h-6 cursor-pointer text-yellow-700 transition-all duration-300 ease-in`}\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n                    />\n                  </svg>\n                  <svg\n                    onClick={(e) => unWishReq(e, item._id, setWlist)}\n                    className={`${\n                      !isWish(item._id, wList) && \"hidden\"\n                    } w-5 h-5 md:w-6 md:h-6 cursor-pointer text-yellow-700 transition-all duration-300 ease-in`}\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 20 20\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </div>\n                {/* WhisList Logic End */}\n              </div>\n            </Fragment>\n          );\n        })\n      ) : (\n        <div className=\"col-span-2 md:col-span-3 lg:col-span-4 flex items-center justify-center py-24 text-2xl\">\n          Không tìm thấy sản phẩm\n        </div>\n      )}\n    </Fragment>\n  );\n};\n\nexport default SingleProduct;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}