{"ast":null,"code":"import React,{Fragment,useContext,useState}from\"react\";import{useParams}from\"react-router-dom\";import{Alert}from\"./Action\";import moment from\"moment\";import{LayoutContext}from\"../layout\";import{deleteReview}from\"./Action\";import{isAuthenticate}from\"../auth/fetchApi\";import{getSingleProduct}from\"./FetchApi\";const AllReviews=props=>{const{data,dispatch}=useContext(LayoutContext);const{pRatingsReviews}=data.singleProductDetail;let{id}=useParams();// Prodduct Id\nconst[fData,setFdata]=useState({success:false});if(fData.success){setTimeout(()=>{setFdata({...fData,success:false});},2000);}const fetchData=async()=>{try{let responseData=await getSingleProduct(id);if(responseData.Product){dispatch({type:\"singleProductDetail\",payload:responseData.Product});}if(responseData.error){console.log(responseData.error);}}catch(error){console.log(error);}};console.log(pRatingsReviews);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\"},fData.success?Alert(\"red\",fData.success):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-6 mb-12 md:mx-16 lg:mx-20 xl:mx-24\"},pRatingsReviews.length>0?pRatingsReviews.map((item,index)=>{return/*#__PURE__*/React.createElement(Fragment,{key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-6 md:mb-8 flex flex-col md:flex-row md:items-start\"},/*#__PURE__*/React.createElement(\"img\",{className:\"mx-2 w-16 h-16 rounded-full\",src:\"https://secure.gravatar.com/avatar/676d90a1574e9d3ebf98dd36f7adad60?s=60&d=mm&r=g\",alt:\"pic\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"mx-2 flex justify-between w-full\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col\"},/*#__PURE__*/React.createElement(\"span\",null,item.user?item.user.name:\"\"),/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm text-yellow-700\"},moment(item.createdAt).format(\"lll\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"leading-tight mt-3\"},item.review)),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},[...Array(Number(item.rating))].map(index=>{return/*#__PURE__*/React.createElement(\"span\",{key:index},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-4 h-4 fill-current text-yellow-700\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})));}),[...Array(5-Number(item.rating))].map(index=>{return/*#__PURE__*/React.createElement(\"span\",{key:index},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-4 h-4 fill-current text-gray-300\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})));})),item.user&&isAuthenticate()&&item.user._id===isAuthenticate().user._id?/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-center my-2\"},/*#__PURE__*/React.createElement(\"span\",{onClick:e=>deleteReview(item._id,data.singleProductDetail._id,fetchData,setFdata),className:\"hover:bg-gray-300 p-2 rounded-full cursor-pointer\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-6 h-6 text-yellow-700\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})))):/*#__PURE__*/React.createElement(\"div\",null)))));}):/*#__PURE__*/React.createElement(\"div\",null,\"Kh\\xF4ng t\\xECm th\\u1EA5y \\u0111\\xE1nh gi\\xE1 n\\xE0o\")));};export default AllReviews;","map":{"version":3,"names":["React","Fragment","useContext","useState","useParams","Alert","moment","LayoutContext","deleteReview","isAuthenticate","getSingleProduct","AllReviews","props","data","dispatch","pRatingsReviews","singleProductDetail","id","fData","setFdata","success","setTimeout","fetchData","responseData","Product","type","payload","error","console","log","createElement","className","length","map","item","index","key","src","alt","user","name","createdAt","format","review","Array","Number","rating","fill","viewBox","xmlns","d","_id","onClick","e","stroke","strokeLinecap","strokeLinejoin","strokeWidth"],"sources":["C:/Users/khang/Downloads/Shop_reactjs/Shop_reactjs/frontend/src/components/shop/productDetails/AllReviews.js"],"sourcesContent":["import React, { Fragment, useContext, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Alert } from \"./Action\";\n\nimport moment from \"moment\";\nimport { LayoutContext } from \"../layout\";\nimport { deleteReview } from \"./Action\";\nimport { isAuthenticate } from \"../auth/fetchApi\";\nimport { getSingleProduct } from \"./FetchApi\";\n\nconst AllReviews = (props) => {\n  const { data, dispatch } = useContext(LayoutContext);\n  const { pRatingsReviews } = data.singleProductDetail;\n  let { id } = useParams(); // Prodduct Id\n\n  const [fData, setFdata] = useState({\n    success: false,\n  });\n\n  if (fData.success) {\n    setTimeout(() => {\n      setFdata({ ...fData, success: false });\n    }, 2000);\n  }\n\n  const fetchData = async () => {\n    try {\n      let responseData = await getSingleProduct(id);\n      if (responseData.Product) {\n        dispatch({\n          type: \"singleProductDetail\",\n          payload: responseData.Product,\n        });\n      }\n      if (responseData.error) {\n        console.log(responseData.error);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  console.log(pRatingsReviews);\n  return (\n    <Fragment>\n      <div className=\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\n        {fData.success ? Alert(\"red\", fData.success) : \"\"}\n      </div>\n      <div className=\"mt-6 mb-12 md:mx-16 lg:mx-20 xl:mx-24\">\n        {/* List start */}\n        {pRatingsReviews.length > 0 ? (\n          pRatingsReviews.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <div className=\"mb-6 md:mb-8 flex flex-col md:flex-row md:items-start\">\n                  <img\n                    className=\"mx-2 w-16 h-16 rounded-full\"\n                    src=\"https://secure.gravatar.com/avatar/676d90a1574e9d3ebf98dd36f7adad60?s=60&d=mm&r=g\"\n                    alt=\"pic\"\n                  />\n                  <div className=\"mx-2 flex justify-between w-full\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex flex-col\">\n                        <span>{item.user ? item.user.name : \"\"}</span>\n                        <span className=\"text-sm text-yellow-700\">\n                          {moment(item.createdAt).format(\"lll\")}\n                        </span>\n                      </div>\n                      <div className=\"leading-tight mt-3\">{item.review}</div>\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex\">\n                        {/* Yellow Star */}\n                        {[...Array(Number(item.rating))].map((index) => {\n                          return (\n                            <span key={index}>\n                              <svg\n                                className=\"w-4 h-4 fill-current text-yellow-700\"\n                                fill=\"currentColor\"\n                                viewBox=\"0 0 20 20\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                              >\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                              </svg>\n                            </span>\n                          );\n                        })}\n                        {/* White Star */}\n                        {[...Array(5 - Number(item.rating))].map((index) => {\n                          return (\n                            <span key={index}>\n                              <svg\n                                className=\"w-4 h-4 fill-current text-gray-300\"\n                                fill=\"currentColor\"\n                                viewBox=\"0 0 20 20\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                              >\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                              </svg>\n                            </span>\n                          );\n                        })}\n                      </div>\n                      {item.user &&\n                      isAuthenticate() &&\n                      item.user._id === isAuthenticate().user._id ? (\n                        <div className=\"flex justify-center my-2\">\n                          <span\n                            onClick={(e) =>\n                              deleteReview(\n                                item._id,\n                                data.singleProductDetail._id,\n                                fetchData,\n                                setFdata\n                              )\n                            }\n                            className=\"hover:bg-gray-300 p-2 rounded-full cursor-pointer\"\n                          >\n                            <svg\n                              className=\"w-6 h-6 text-yellow-700\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={2}\n                                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                              />\n                            </svg>\n                          </span>\n                        </div>\n                      ) : (\n                        <div></div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </Fragment>\n            );\n          })\n        ) : (\n          <div>Không tìm thấy đánh giá nào</div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nexport default AllReviews;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}