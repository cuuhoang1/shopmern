{"ast":null,"code":"import{getUserById,updatePersonalInformationFetch,getOrderByUser,updatePassword}from\"./FetchApi\";export const logout=()=>{localStorage.removeItem(\"jwt\");localStorage.removeItem(\"cart\");localStorage.removeItem(\"wishList\");window.location.href=\"/\";};export const fetchData=async dispatch=>{dispatch({type:\"loading\",payload:true});let userId=JSON.parse(localStorage.getItem(\"jwt\"))?JSON.parse(localStorage.getItem(\"jwt\")).user._id:\"\";try{let responseData=await getUserById(userId);setTimeout(()=>{if(responseData&&responseData.User){dispatch({type:\"userDetails\",payload:responseData.User});dispatch({type:\"loading\",payload:false});}},500);}catch(error){console.log(error);}};export const fetchOrderByUser=async dispatch=>{dispatch({type:\"loading\",payload:true});let userId=JSON.parse(localStorage.getItem(\"jwt\"))?JSON.parse(localStorage.getItem(\"jwt\")).user._id:\"\";try{let responseData=await getOrderByUser(userId);setTimeout(()=>{if(responseData&&responseData.Order){console.log(responseData);dispatch({type:\"OrderByUser\",payload:responseData.Order});dispatch({type:\"loading\",payload:false});}},500);}catch(error){console.log(error);}};export const updatePersonalInformationAction=async(dispatch,fData)=>{const formData={uId:fData.id,name:fData.name,phoneNumber:fData.phone};dispatch({type:\"loading\",payload:true});try{let responseData=await updatePersonalInformationFetch(formData);setTimeout(()=>{if(responseData&&responseData.success){dispatch({type:\"loading\",payload:false});fetchData(dispatch);}},500);}catch(error){console.log(error);}};export const handleChangePassword=async(fData,setFdata,dispatch)=>{if(!fData.newPassword||!fData.oldPassword||!fData.confirmPassword){setFdata({...fData,error:\"Please provide your all password and a new password\"});}else if(fData.newPassword!==fData.confirmPassword){setFdata({...fData,error:\"Password does't match\"});}else{const formData={uId:JSON.parse(localStorage.getItem(\"jwt\")).user._id,oldPassword:fData.oldPassword,newPassword:fData.newPassword};dispatch({type:\"loading\",payload:true});try{let responseData=await updatePassword(formData);if(responseData&&responseData.success){setFdata({...fData,success:responseData.success,error:\"\",oldPassword:\"\",newPassword:\"\",confirmPassword:\"\"});dispatch({type:\"loading\",payload:false});}else if(responseData.error){dispatch({type:\"loading\",payload:false});setFdata({...fData,error:responseData.error,success:\"\",oldPassword:\"\",newPassword:\"\",confirmPassword:\"\"});}}catch(error){console.log(error);}}};","map":{"version":3,"names":["getUserById","updatePersonalInformationFetch","getOrderByUser","updatePassword","logout","localStorage","removeItem","window","location","href","fetchData","dispatch","type","payload","userId","JSON","parse","getItem","user","_id","responseData","setTimeout","User","error","console","log","fetchOrderByUser","Order","updatePersonalInformationAction","fData","formData","uId","id","name","phoneNumber","phone","success","handleChangePassword","setFdata","newPassword","oldPassword","confirmPassword"],"sources":["C:/Users/khang/Downloads/Shop_reactjs/Shop_reactjs/frontend/src/components/shop/dashboardUser/Action.js"],"sourcesContent":["import {\n  getUserById,\n  updatePersonalInformationFetch,\n  getOrderByUser,\n  updatePassword,\n} from \"./FetchApi\";\n\nexport const logout = () => {\n  localStorage.removeItem(\"jwt\");\n  localStorage.removeItem(\"cart\");\n  localStorage.removeItem(\"wishList\");\n  window.location.href = \"/\";\n};\n\nexport const fetchData = async (dispatch) => {\n  dispatch({ type: \"loading\", payload: true });\n  let userId = JSON.parse(localStorage.getItem(\"jwt\"))\n    ? JSON.parse(localStorage.getItem(\"jwt\")).user._id\n    : \"\";\n  try {\n    let responseData = await getUserById(userId);\n    setTimeout(() => {\n      if (responseData && responseData.User) {\n        dispatch({ type: \"userDetails\", payload: responseData.User });\n        dispatch({ type: \"loading\", payload: false });\n      }\n    }, 500);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const fetchOrderByUser = async (dispatch) => {\n  dispatch({ type: \"loading\", payload: true });\n  let userId = JSON.parse(localStorage.getItem(\"jwt\"))\n    ? JSON.parse(localStorage.getItem(\"jwt\")).user._id\n    : \"\";\n  try {\n    let responseData = await getOrderByUser(userId);\n    setTimeout(() => {\n      if (responseData && responseData.Order) {\n        console.log(responseData);\n        dispatch({ type: \"OrderByUser\", payload: responseData.Order });\n        dispatch({ type: \"loading\", payload: false });\n      }\n    }, 500);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const updatePersonalInformationAction = async (dispatch, fData) => {\n  const formData = {\n    uId: fData.id,\n    name: fData.name,\n    phoneNumber: fData.phone,\n  };\n  dispatch({ type: \"loading\", payload: true });\n  try {\n    let responseData = await updatePersonalInformationFetch(formData);\n    setTimeout(() => {\n      if (responseData && responseData.success) {\n        dispatch({ type: \"loading\", payload: false });\n        fetchData(dispatch);\n      }\n    }, 500);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const handleChangePassword = async (fData, setFdata, dispatch) => {\n  if (!fData.newPassword || !fData.oldPassword || !fData.confirmPassword) {\n    setFdata({\n      ...fData,\n      error: \"Please provide your all password and a new password\",\n    });\n  } else if (fData.newPassword !== fData.confirmPassword) {\n    setFdata({ ...fData, error: \"Password does't match\" });\n  } else {\n    const formData = {\n      uId: JSON.parse(localStorage.getItem(\"jwt\")).user._id,\n      oldPassword: fData.oldPassword,\n      newPassword: fData.newPassword,\n    };\n    dispatch({ type: \"loading\", payload: true });\n    try {\n      let responseData = await updatePassword(formData);\n      if (responseData && responseData.success) {\n        setFdata({\n          ...fData,\n          success: responseData.success,\n          error: \"\",\n          oldPassword: \"\",\n          newPassword: \"\",\n          confirmPassword: \"\",\n        });\n        dispatch({ type: \"loading\", payload: false });\n      } else if (responseData.error) {\n        dispatch({ type: \"loading\", payload: false });\n        setFdata({\n          ...fData,\n          error: responseData.error,\n          success: \"\",\n          oldPassword: \"\",\n          newPassword: \"\",\n          confirmPassword: \"\",\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}