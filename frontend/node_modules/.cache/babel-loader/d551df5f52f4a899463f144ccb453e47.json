{"ast":null,"code":"import React,{Fragment,useState,useContext}from\"react\";import{useParams}from\"react-router-dom\";import{Alert,reviewSubmitHanlder}from\"./Action\";import{LayoutContext}from\"../layout\";import{isAuthenticate}from\"../auth/fetchApi\";import{getSingleProduct}from\"./FetchApi\";const ReviewForm=props=>{const{data,dispatch}=useContext(LayoutContext);let{id}=useParams();// Product Id\nconst[fData,setFdata]=useState({rating:\"\",review:\"\",error:false,success:false,pId:id});if(fData.error||fData.success){setTimeout(()=>{setFdata({...fData,error:false,success:false});},3000);}const fetchData=async()=>{try{let responseData=await getSingleProduct(id);if(responseData.Product){dispatch({type:\"singleProductDetail\",payload:responseData.Product});console.log(data);}if(responseData.error){console.log(responseData.error);}}catch(error){console.log(error);}};const ratingUserList=data.singleProductDetail.pRatingsReviews.map(item=>{return item.user?item.user._id:\"\";});return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\"},fData.error?Alert(\"red\",fData.error):\"\",fData.success?Alert(\"green\",fData.success):\"\"),ratingUserList.includes(isAuthenticate().user._id)?/*#__PURE__*/React.createElement(\"div\",{className:\"mb-12 md:mx-16 lg:mx-20 xl:mx-24\"}):/*#__PURE__*/React.createElement(\"div\",{className:\"mb-12 md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col space-y-2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-2xl font-medium\"},\"Th\\xEAm \\u0111\\xE1nh gi\\xE1\"),/*#__PURE__*/React.createElement(\"span\",{className:\"text-gray-600 text-sm\"},\"\\u0110\\u1ECBa ch\\u1EC9 email c\\u1EE7a b\\u1EA1n s\\u1EBD kh\\xF4ng \\u0111\\u01B0\\u1EE3c c\\xF4ng b\\u1ED1. C\\xE1c tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c \\u0111\\u01B0\\u1EE3c \\u0111\\xE1nh d\\u1EA5u *\")),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4\"},/*#__PURE__*/React.createElement(\"fieldset\",{onChange:e=>setFdata({...fData,rating:e.target.value}),className:\"rating\"},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",className:\"rating\",id:\"star5\",name:\"rating\",defaultValue:5}),/*#__PURE__*/React.createElement(\"label\",{className:\"full\",htmlFor:\"star5\",title:\"Awesome - 5 stars\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",className:\"rating\",id:\"star4\",name:\"rating\",defaultValue:4}),/*#__PURE__*/React.createElement(\"label\",{className:\"full\",htmlFor:\"star4\",title:\"Pretty good - 4 stars\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",className:\"rating\",id:\"star3\",name:\"rating\",defaultValue:3}),/*#__PURE__*/React.createElement(\"label\",{className:\"full\",htmlFor:\"star3\",title:\"Meh - 3 stars\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",className:\"rating\",id:\"star2\",name:\"rating\",defaultValue:2}),/*#__PURE__*/React.createElement(\"label\",{className:\"full\",htmlFor:\"star2\",title:\"Kinda bad - 2 stars\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",className:\"rating\",id:\"star1\",name:\"rating\",defaultValue:1}),/*#__PURE__*/React.createElement(\"label\",{className:\"full\",htmlFor:\"star1\",title:\"Sucks big time - 1 star\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"space-y-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"textArea\"},\"\\u0110\\xE1nh gi\\xE1 \",/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm text-gray-600\"},\"*\")),/*#__PURE__*/React.createElement(\"textarea\",{onChange:e=>setFdata({...fData,review:e.target.value}),value:fData.review,className:\"border px-4 py-2 focus:outline-none\",name:\"textArea\",id:\"textArea\",cols:30,rows:3,placeholder:\"Your review...\"})),/*#__PURE__*/React.createElement(\"div\",{onClick:e=>reviewSubmitHanlder(fData,setFdata,fetchData),style:{background:\"#303031\"},className:\"inline-block rounded px-4 py-2 text-white text-center cursor-pointer\"},\"G\\u1EEDi \\u0111i\"))));};export default ReviewForm;","map":{"version":3,"names":["React","Fragment","useState","useContext","useParams","Alert","reviewSubmitHanlder","LayoutContext","isAuthenticate","getSingleProduct","ReviewForm","props","data","dispatch","id","fData","setFdata","rating","review","error","success","pId","setTimeout","fetchData","responseData","Product","type","payload","console","log","ratingUserList","singleProductDetail","pRatingsReviews","map","item","user","_id","createElement","className","includes","onChange","e","target","value","name","defaultValue","htmlFor","title","cols","rows","placeholder","onClick","style","background"],"sources":["C:/Users/khang/Downloads/Shop_reactjs/Shop_reactjs/frontend/src/components/shop/productDetails/ReviewForm.js"],"sourcesContent":["import React, { Fragment, useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Alert, reviewSubmitHanlder } from \"./Action\";\nimport { LayoutContext } from \"../layout\";\nimport { isAuthenticate } from \"../auth/fetchApi\";\nimport { getSingleProduct } from \"./FetchApi\";\n\nconst ReviewForm = (props) => {\n  const { data, dispatch } = useContext(LayoutContext);\n  let { id } = useParams(); // Product Id\n\n  const [fData, setFdata] = useState({\n    rating: \"\",\n    review: \"\",\n    error: false,\n    success: false,\n    pId: id,\n  });\n\n  if (fData.error || fData.success) {\n    setTimeout(() => {\n      setFdata({ ...fData, error: false, success: false });\n    }, 3000);\n  }\n\n  const fetchData = async () => {\n    try {\n      let responseData = await getSingleProduct(id);\n      if (responseData.Product) {\n        dispatch({\n          type: \"singleProductDetail\",\n          payload: responseData.Product,\n        });\n        console.log(data);\n      }\n      if (responseData.error) {\n        console.log(responseData.error);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const ratingUserList = data.singleProductDetail.pRatingsReviews.map(\n    (item) => {\n      return item.user ? item.user._id : \"\";\n    }\n  );\n\n  return (\n    <Fragment>\n      <div className=\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\n        {fData.error ? Alert(\"red\", fData.error) : \"\"}\n        {fData.success ? Alert(\"green\", fData.success) : \"\"}\n      </div>\n      {ratingUserList.includes(isAuthenticate().user._id) ? (\n        <div className=\"mb-12 md:mx-16 lg:mx-20 xl:mx-24\"></div>\n      ) : (\n        <div className=\"mb-12 md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\n          <div className=\"flex flex-col space-y-2\">\n            <span className=\"text-2xl font-medium\">Thêm đánh giá</span>\n            <span className=\"text-gray-600 text-sm\">\n            Địa chỉ email của bạn sẽ không được công bố. Các trường bắt buộc được đánh dấu *\n            </span>\n          </div>\n          {/* Input Rating */}\n          <div className=\"mb-4\">\n            <fieldset\n              onChange={(e) => setFdata({ ...fData, rating: e.target.value })}\n              className=\"rating\"\n            >\n              <input\n                type=\"radio\"\n                className=\"rating\"\n                id=\"star5\"\n                name=\"rating\"\n                defaultValue={5}\n              />\n              <label\n                className=\"full\"\n                htmlFor=\"star5\"\n                title=\"Awesome - 5 stars\"\n              />\n              <input\n                type=\"radio\"\n                className=\"rating\"\n                id=\"star4\"\n                name=\"rating\"\n                defaultValue={4}\n              />\n              <label\n                className=\"full\"\n                htmlFor=\"star4\"\n                title=\"Pretty good - 4 stars\"\n              />\n              <input\n                type=\"radio\"\n                className=\"rating\"\n                id=\"star3\"\n                name=\"rating\"\n                defaultValue={3}\n              />\n              <label className=\"full\" htmlFor=\"star3\" title=\"Meh - 3 stars\" />\n              <input\n                type=\"radio\"\n                className=\"rating\"\n                id=\"star2\"\n                name=\"rating\"\n                defaultValue={2}\n              />\n              <label\n                className=\"full\"\n                htmlFor=\"star2\"\n                title=\"Kinda bad - 2 stars\"\n              />\n              <input\n                type=\"radio\"\n                className=\"rating\"\n                id=\"star1\"\n                name=\"rating\"\n                defaultValue={1}\n              />\n              <label\n                className=\"full\"\n                htmlFor=\"star1\"\n                title=\"Sucks big time - 1 star\"\n              />\n            </fieldset>\n          </div>\n          {/* Review Form */}\n          <div className=\"space-y-4\">\n            <div className=\"flex flex-col\">\n              <label htmlFor=\"textArea\">\n                Đánh giá <span className=\"text-sm text-gray-600\">*</span>\n              </label>\n              <textarea\n                onChange={(e) => setFdata({ ...fData, review: e.target.value })}\n                value={fData.review}\n                className=\"border px-4 py-2 focus:outline-none\"\n                name=\"textArea\"\n                id=\"textArea\"\n                cols={30}\n                rows={3}\n                placeholder=\"Your review...\"\n              />\n            </div>\n            <div\n              onClick={(e) => reviewSubmitHanlder(fData, setFdata, fetchData)}\n              style={{ background: \"#303031\" }}\n              className=\"inline-block rounded px-4 py-2 text-white text-center cursor-pointer\"\n            >\n              Gửi đi\n            </div>\n          </div>\n        </div>\n      )}\n    </Fragment>\n  );\n};\n\nexport default ReviewForm;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC7D,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,KAAK,CAAEC,mBAAmB,KAAQ,UAAU,CACrD,OAASC,aAAa,KAAQ,WAAW,CACzC,OAASC,cAAc,KAAQ,kBAAkB,CACjD,OAASC,gBAAgB,KAAQ,YAAY,CAE7C,KAAM,CAAAC,UAAU,CAAIC,KAAK,EAAK,CAC5B,KAAM,CAAEC,IAAI,CAAEC,QAAS,CAAC,CAAGV,UAAU,CAACI,aAAa,CAAC,CACpD,GAAI,CAAEO,EAAG,CAAC,CAAGV,SAAS,CAAC,CAAC,CAAE;AAE1B,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,CACjCe,MAAM,CAAE,EAAE,CACVC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,KAAK,CACZC,OAAO,CAAE,KAAK,CACdC,GAAG,CAAEP,EACP,CAAC,CAAC,CAEF,GAAIC,KAAK,CAACI,KAAK,EAAIJ,KAAK,CAACK,OAAO,CAAE,CAChCE,UAAU,CAAC,IAAM,CACfN,QAAQ,CAAC,CAAE,GAAGD,KAAK,CAAEI,KAAK,CAAE,KAAK,CAAEC,OAAO,CAAE,KAAM,CAAC,CAAC,CACtD,CAAC,CAAE,IAAI,CAAC,CACV,CAEA,KAAM,CAAAG,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,GAAI,CAAAC,YAAY,CAAG,KAAM,CAAAf,gBAAgB,CAACK,EAAE,CAAC,CAC7C,GAAIU,YAAY,CAACC,OAAO,CAAE,CACxBZ,QAAQ,CAAC,CACPa,IAAI,CAAE,qBAAqB,CAC3BC,OAAO,CAAEH,YAAY,CAACC,OACxB,CAAC,CAAC,CACFG,OAAO,CAACC,GAAG,CAACjB,IAAI,CAAC,CACnB,CACA,GAAIY,YAAY,CAACL,KAAK,CAAE,CACtBS,OAAO,CAACC,GAAG,CAACL,YAAY,CAACL,KAAK,CAAC,CACjC,CACF,CAAE,MAAOA,KAAK,CAAE,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAW,cAAc,CAAGlB,IAAI,CAACmB,mBAAmB,CAACC,eAAe,CAACC,GAAG,CAChEC,IAAI,EAAK,CACR,MAAO,CAAAA,IAAI,CAACC,IAAI,CAAGD,IAAI,CAACC,IAAI,CAACC,GAAG,CAAG,EAAE,CACvC,CACF,CAAC,CAED,mBACEpC,KAAA,CAAAqC,aAAA,CAACpC,QAAQ,mBACPD,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,0CAA0C,EACtDvB,KAAK,CAACI,KAAK,CAAGd,KAAK,CAAC,KAAK,CAAEU,KAAK,CAACI,KAAK,CAAC,CAAG,EAAE,CAC5CJ,KAAK,CAACK,OAAO,CAAGf,KAAK,CAAC,OAAO,CAAEU,KAAK,CAACK,OAAO,CAAC,CAAG,EAC9C,CAAC,CACLU,cAAc,CAACS,QAAQ,CAAC/B,cAAc,CAAC,CAAC,CAAC2B,IAAI,CAACC,GAAG,CAAC,cACjDpC,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,kCAAkC,CAAM,CAAC,cAExDtC,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,gDAAgD,eAC7DtC,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,yBAAyB,eACtCtC,KAAA,CAAAqC,aAAA,SAAMC,SAAS,CAAC,sBAAsB,EAAC,6BAAmB,CAAC,cAC3DtC,KAAA,CAAAqC,aAAA,SAAMC,SAAS,CAAC,uBAAuB,EAAC,6LAElC,CACH,CAAC,cAENtC,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,MAAM,eACnBtC,KAAA,CAAAqC,aAAA,aACEG,QAAQ,CAAGC,CAAC,EAAKzB,QAAQ,CAAC,CAAE,GAAGD,KAAK,CAAEE,MAAM,CAAEwB,CAAC,CAACC,MAAM,CAACC,KAAM,CAAC,CAAE,CAChEL,SAAS,CAAC,QAAQ,eAElBtC,KAAA,CAAAqC,aAAA,UACEX,IAAI,CAAC,OAAO,CACZY,SAAS,CAAC,QAAQ,CAClBxB,EAAE,CAAC,OAAO,CACV8B,IAAI,CAAC,QAAQ,CACbC,YAAY,CAAE,CAAE,CACjB,CAAC,cACF7C,KAAA,CAAAqC,aAAA,UACEC,SAAS,CAAC,MAAM,CAChBQ,OAAO,CAAC,OAAO,CACfC,KAAK,CAAC,mBAAmB,CAC1B,CAAC,cACF/C,KAAA,CAAAqC,aAAA,UACEX,IAAI,CAAC,OAAO,CACZY,SAAS,CAAC,QAAQ,CAClBxB,EAAE,CAAC,OAAO,CACV8B,IAAI,CAAC,QAAQ,CACbC,YAAY,CAAE,CAAE,CACjB,CAAC,cACF7C,KAAA,CAAAqC,aAAA,UACEC,SAAS,CAAC,MAAM,CAChBQ,OAAO,CAAC,OAAO,CACfC,KAAK,CAAC,uBAAuB,CAC9B,CAAC,cACF/C,KAAA,CAAAqC,aAAA,UACEX,IAAI,CAAC,OAAO,CACZY,SAAS,CAAC,QAAQ,CAClBxB,EAAE,CAAC,OAAO,CACV8B,IAAI,CAAC,QAAQ,CACbC,YAAY,CAAE,CAAE,CACjB,CAAC,cACF7C,KAAA,CAAAqC,aAAA,UAAOC,SAAS,CAAC,MAAM,CAACQ,OAAO,CAAC,OAAO,CAACC,KAAK,CAAC,eAAe,CAAE,CAAC,cAChE/C,KAAA,CAAAqC,aAAA,UACEX,IAAI,CAAC,OAAO,CACZY,SAAS,CAAC,QAAQ,CAClBxB,EAAE,CAAC,OAAO,CACV8B,IAAI,CAAC,QAAQ,CACbC,YAAY,CAAE,CAAE,CACjB,CAAC,cACF7C,KAAA,CAAAqC,aAAA,UACEC,SAAS,CAAC,MAAM,CAChBQ,OAAO,CAAC,OAAO,CACfC,KAAK,CAAC,qBAAqB,CAC5B,CAAC,cACF/C,KAAA,CAAAqC,aAAA,UACEX,IAAI,CAAC,OAAO,CACZY,SAAS,CAAC,QAAQ,CAClBxB,EAAE,CAAC,OAAO,CACV8B,IAAI,CAAC,QAAQ,CACbC,YAAY,CAAE,CAAE,CACjB,CAAC,cACF7C,KAAA,CAAAqC,aAAA,UACEC,SAAS,CAAC,MAAM,CAChBQ,OAAO,CAAC,OAAO,CACfC,KAAK,CAAC,yBAAyB,CAChC,CACO,CACP,CAAC,cAEN/C,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,WAAW,eACxBtC,KAAA,CAAAqC,aAAA,QAAKC,SAAS,CAAC,eAAe,eAC5BtC,KAAA,CAAAqC,aAAA,UAAOS,OAAO,CAAC,UAAU,EAAC,sBACf,cAAA9C,KAAA,CAAAqC,aAAA,SAAMC,SAAS,CAAC,uBAAuB,EAAC,GAAO,CACnD,CAAC,cACRtC,KAAA,CAAAqC,aAAA,aACEG,QAAQ,CAAGC,CAAC,EAAKzB,QAAQ,CAAC,CAAE,GAAGD,KAAK,CAAEG,MAAM,CAAEuB,CAAC,CAACC,MAAM,CAACC,KAAM,CAAC,CAAE,CAChEA,KAAK,CAAE5B,KAAK,CAACG,MAAO,CACpBoB,SAAS,CAAC,qCAAqC,CAC/CM,IAAI,CAAC,UAAU,CACf9B,EAAE,CAAC,UAAU,CACbkC,IAAI,CAAE,EAAG,CACTC,IAAI,CAAE,CAAE,CACRC,WAAW,CAAC,gBAAgB,CAC7B,CACE,CAAC,cACNlD,KAAA,CAAAqC,aAAA,QACEc,OAAO,CAAGV,CAAC,EAAKnC,mBAAmB,CAACS,KAAK,CAAEC,QAAQ,CAAEO,SAAS,CAAE,CAChE6B,KAAK,CAAE,CAAEC,UAAU,CAAE,SAAU,CAAE,CACjCf,SAAS,CAAC,sEAAsE,EACjF,kBAEI,CACF,CACF,CAEC,CAAC,CAEf,CAAC,CAED,cAAe,CAAA5B,UAAU"},"metadata":{},"sourceType":"module"}